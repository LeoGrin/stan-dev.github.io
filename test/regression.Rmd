---
output:
  pdf_document: default
  html_document: default
---
```{r setup, include=FALSE}
library(knitr)
library(readr)
print_w_lines <- function(file) {
  x <- strsplit(file,"\n")[[1]]
  for (i in seq_along(x)) x[i] <- paste0("[", i, "]  ", x[i])
  cat(x, sep = "\n")
}

```

# Regression Models

Stan supports regression models from simple linear regressions to
multilevel generalized linear models.

## Linear Regression

The simplest linear regression model is the following, with a single
predictor and a slope and intercept coefficient, and normally
distributed noise.  This model can be written using standard
regression notation as
$$
y_n = \alpha + \beta x_n + \epsilon_n
\quad\text{where}\quad
\epsilon_n \sim \operatorname{normal}(0,\sigma).
$$

This is equivalent to the following sampling involving the
residual,
$$
y_n - (\alpha + \beta X_n) \sim \operatorname{normal}(0,\sigma),
$$
and reducing still further, to
$$
y_n \sim \operatorname{normal}(\alpha + \beta X_n, \, \sigma).
$$



$\color{red}{\text{Option 1}}$ This latter form of the model is coded in Stan as follows. [regression_1.R](https://github.com/stan-dev/stan-dev.github.io/blob/master/test/regression/regression_1.R), [regression_1.py](https://github.com/stan-dev/stan-dev.github.io/blob/master/test/regression/regression_1.py), [regression_1.stan](https://github.com/stan-dev/stan-dev.github.io/blob/master/test/regression/regression_1.stan) 

$\color{red}{\text{Option 2}}$
This latter form of the model is coded in Stan as follows^[source at: https://github.com/stan-dev/stan-dev.github.io/blob/master/test/regression/]. 

$\color{red}{\text{Option 3}}$
This latter form of the model is coded in Stan as follows [regression_1](https://github.com/stan-dev/stan-dev.github.io/blob/master/test/regression/)
```{r echo=FALSE, comment=""}
library(knitr)
stan_text = read_file('regression/regression_1.stan')
writeLines(stan_text)
```
$\color{red}{\text{new way above with insert from disk, old way below with source typed into doc.}}$

```
data {
  int<lower=0> N;
  vector[N] x;
  vector[N] y;
}
parameters {
  real alpha;
  real beta;
  real<lower=0> sigma;
}
model {
  y ~ normal(alpha + beta * x, sigma);
}
```

There are `N` observations, each with predictor `x[n]` and
outcome `y[n]`.  The intercept and slope parameters are
`alpha` and `beta`.  The model assumes a normally
distributed noise term with scale `sigma`.  This model has
improper priors for the two regression coefficients.

**END**


